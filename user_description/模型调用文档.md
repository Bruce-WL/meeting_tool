# 接口调用示例

## ASR模型
注释：
- 该接口返回文本转写结果，后续可接 LLM 结构化摘要。
- `X-Model-Request-Id`、`X-Conversation-Id` 为可选自定义追踪字段。
  
POST /v1/audio/transcriptions
curl --location --request POST 'http://model.mify.ai.srv/v1/audio/transcriptions' \
--header "Authorization: Bearer $MIFY_API_KEY" \
--header 'X-Model-Provider-Id: volcengine_maas' \
--header 'X-Model-Request-Id: ' \ 可自定义
--header 'X-User-Id: ' \
--header 'Content-Type: application/json' \
--header 'X-Conversation-Id: 1234' \可自定义
--data-raw '{
    "audio": {
        "data": ""//里面放音频文件的base64编码  支持 PCM / WAV / MP3/OGG OPUS
    },
    "model": "volc.bigasr.auc_turbo"
}'

## 文本模型（用于ASR结果分析,输出json格式）
注释：
- 适合对 ASR 结果进行结构化总结或抽取任务。
- `role` 字段需与具体模型兼容，示例中对 mimo-v2-flash 做了提示。

HTTP调用方式
curl 示例
查询模型列表：可通过以下命令获取当前支持的模型列表，查询 Provider-Id 与 model name
curl --location 'http://model.mify.ai.srv/v1/models'

聊天补全
对于 mimo-v2-flash，使用 "role": "system" 替换 "role": "developer"
curl --location --request POST 'http://model.mify.ai.srv/v1/chat/completions' \
--header "Authorization: Bearer $MIFY_API_KEY" \
--header 'X-Model-Provider-Id: xiaomi' \
--header 'X-Model-Request-Id: 1234' \
--header 'Content-Type: application/json' \
--data-raw '{
    "model": "mimo-v2-flash",
    "messages": [
        {
            "role": "system",
            "content": "You are a helpful assistant."
        },
        {
            "role": "user",
            "content": "please introduce yourself"
        }
    ]
}'


Response Format 对象结构
注释：
- `json_object` 适用于简单结构输出；`json_schema` 适用于强约束结构输出。
- 结构体需完整匹配，否则服务端可能返回解析错误。

参数名
类型
必填
可选值
描述
type
string 

是
text | json_object | json_schema
消息的角色
json_schema参考结构:
"response_format": {
    "type": "json_schema",
    "json_schema": {
        "name": "NextQuery",
        "schema": {
            "type": "object",
            "title": "NextQuery",
            "properties": {
                "first": {
                    "type": "string",
                    "title": "First",
                    "description": "第一个候选问题"
                },
                "second": {
                    "type": "string",
                    "title": "Second",
                    "description": "第二个候选问题"
                },
                "third": {
                    "type": "string",
                    "title": "Third",
                    "description": "第三个候选问题"
                }
            },
            "required": [
                "First",
                "Second",
                "Third"
            ]
        }
    }
}

## 查询模型列表
查询模型列表：可通过以下命令获取网关支持的模型列表，查询 Provider-Id 与 model name
curl --location 'http://model.mify.ai.srv/v1/models' --header 'Authorization: Bearer <你的API_KEY>'

## API key
见.env文件
